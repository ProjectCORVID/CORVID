var fs = require('fs');
var path = require('path');
var objDir = path.dirname(module.filename) + '/node_modules/objects';

module.exports = function addMinimalDBObjects(db) {
  fs.readdir(objDir, function (err, names) {
    if (err) {
      throw "error reading dir";
    }

    names.forEach(function (name) {
      var o = db.create();
      var objPath = objDir + '/' + name;

      fs.stat(objPath, function (err, stats) {
        if (!err && stats.isDirectory())
          require(objPath)(o);
      });
    });
  });
};
