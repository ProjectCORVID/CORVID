Referent = require 'referent'

module.exports =
  class Behavior extends Referent
    constructor: ->
      super
      @methods = {}

    addMethod: (name, code, compilerName) ->
      compiler = @db.makeCompiler compilerName
      @methods[name] = compiler(code).bind this
      @methods[name].code = code
      @methods[name].compiler = compiler

    delMethod: (name) -> delete @methods[name]

